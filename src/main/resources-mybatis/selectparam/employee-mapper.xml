<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="club.lylgjiang.mybatis.selectparam.EmployeeMapper">

    <!--public Employee getEmpById();-->
    <select id="getEmpById" resultType="club.lylgjiang.mybatis.pojo.Employee" databaseId="mysql" >
        select * from tb1_employee where id=#{id}
    </select>
    
    
    <resultMap id="empMap" type="club.lylgjiang.mybatis.pojo.Employee">
        <id column="id" property="id"></id>
        <result column="last_name" property="lastName"></result>
        <result column="gender" property="gender"></result>
        <result column="email" property="email"></result>
    </resultMap>
    <!--public Employee getEmpByIdMap(Integer id);-->
    <select id="getEmpByIdMap" resultMap="empMap" databaseId="mysql">
        select * from tb1_employee where id=#{id}
    </select>
    
    
    <resultMap id="empDept" type="club.lylgjiang.mybatis.pojo.Employee">
        <id column="eid" property="id"></id>
        <result column="lastName" property="lastName"></result>
        <result column="gender" property="gender"></result>
        <result column="email" property="email"></result>
        <result column="did" property="department.id"></result>
        <result column="dept_name" property="department.departmentName"></result>
    </resultMap>
    <!--public Employee getEmpAndDeptById(Integer id);-->
    <select id="getEmpAndDeptById" resultMap="empDept" databaseId="mysql">
        SELECT e.`id` eid, e.`last_name` lastName, e.`gender` gender, e.`email` email,
            d.`id` did, d.`dept_name` dept_name
        FROM tb1_employee e, tb1_department d 
        WHERE e.`id`=1 AND e.`dept_id`=d.`id`
    </select>
    
    
    <resultMap id="empDeptPlus" type="club.lylgjiang.mybatis.pojo.Employee">
        <id column="eid" property="id"></id>
        <result column="lastName" property="lastName"></result>
        <result column="gender" property="gender"></result>
        <result column="email" property="email"></result>
        <association property="department" javaType="club.lylgjiang.mybatis.pojo.Department">
            <id column="did" property="id"></id>
            <result column="dept_name" property="departmentName"></result>
        </association>
    </resultMap>
    <!--public Employee getEmpAndDeptByIdPlus(Integer id);-->
    <select id="getEmpAndDeptByIdPlus" resultMap="empDeptPlus" databaseId="mysql">
        SELECT e.`id` eid, e.`last_name` lastName, e.`gender` gender, e.`email` email,
            d.`id` did, d.`dept_name` dept_name
        FROM tb1_employee e, tb1_department d 
        WHERE e.`id`=1 AND e.`dept_id`=d.`id`
    </select>
    
    
    <resultMap id="empDeptPlusStep" type="club.lylgjiang.mybatis.pojo.Employee">
        <id column="id" property="id"></id>
        <result column="last_name" property="lastName"></result>
        <result column="gender" property="gender"></result>
        <result column="email" property="email"></result>
        <association property="department" 
                     select="club.lylgjiang.mybatis.selectparam.DepartmentMapper.getDeptById" 
                     column="dept_id" javaType="club.lylgjiang.mybatis.pojo.Department" fetchType="lazy">
        </association>
    </resultMap>
    <!-- public Employee getEmpAndDeptByIdPlusStep(Integer id);-->
    <select id="getEmpAndDeptByIdPlusStep" resultMap="empDeptPlusStep" databaseId="mysql">
        select * from tb1_employee where id=#{id}
    </select>
    
</mapper>